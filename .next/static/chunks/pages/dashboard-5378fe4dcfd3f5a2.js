(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{3029:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(4232),r=a(2149),i=a(4234),n=a(1724);function c(){let{user:e}=(0,s.useContext)(r.AuthContext);return{user:e,login:(e,t)=>(0,n.x9)(i.j,e,t),logout:()=>(0,n.CI)(i.j)}}},3483:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(7876),r=a(4232),i=a(9099),n=a(3029),c=a(4234),l=a(2009);function d(){let{user:e,logout:t}=(0,n.A)(),[a,d]=(0,r.useState)([]),[o,x]=(0,r.useState)(!1),h=(0,i.useRouter)(),p=async()=>{try{let e=await (0,l.GG)((0,l.rJ)(c.db,"jobs"));d(e.docs.map(e=>({id:e.id,...e.data()})))}catch(e){console.error("Error fetching jobs:",e)}};(0,r.useEffect)(()=>{e?p():h.push("/login")},[e,h]);let m=async()=>{x(!0);try{(await fetch("/api/scrape",{method:"POST"})).ok&&await p()}catch(e){console.error("Error triggering scrape:",e)}finally{x(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)("header",{className:"bg-blue-600 text-white p-4 shadow-md",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Job Listings Dashboard"}),(0,s.jsx)("button",{onClick:t,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition duration-200",children:"Logout"})]})}),(0,s.jsxs)("main",{className:"container mx-auto p-4",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("button",{onClick:m,disabled:o,className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition duration-200 ".concat(o?"opacity-50 cursor-not-allowed":""),children:o?"Scraping...":"Scrape Now"})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:0===a.length?(0,s.jsx)("p",{className:"p-4 text-center text-gray-500",children:'No job listings available. Click "Scrape Now" to fetch data.'}):(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Link"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.title}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.company}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,s.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Apply"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.timestamp})]},e.id))})]})})]})]})}},5372:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(3483)}])},9099:(e,t,a)=>{e.exports=a(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(5372)),_N_E=e.O()}]);